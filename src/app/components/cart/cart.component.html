<div class="min-h-screen bg-gray-50 py-6">
    <div class="container mx-auto px-6 max-w-4xl">
      
      <!-- Header -->
      <div class="text-center mb-6">
        <h1 class="text-2xl font-bold text-gray-900 mb-1">Shopping Cart</h1>
        <p class="text-gray-600">Review your items and complete your order</p>
      </div>
  
      <!-- Cart Items Section -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6">
        
        <!-- Cart Header -->
        <div class="border-b border-gray-200 px-5 py-3">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-3">
              <i class="pi pi-shopping-cart text-blue-600 text-lg"></i>
              <h2 class="text-lg font-semibold text-gray-900">Your Items</h2>
            </div>
            <span class="bg-blue-50 text-blue-700 text-sm font-medium px-2 py-1 rounded">
              {{ cartService.getItems().length }} {{ cartService.getItems().length === 1 ? 'item' : 'items' }}
            </span>
          </div>
        </div>
  
        <!-- Cart Content -->
        <div class="p-5">
          <!-- Empty Cart State -->
          <div *ngIf="cartService.getItems().length === 0" 
               class="text-center py-12">
            <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
              <i class="pi pi-shopping-cart text-2xl text-gray-400"></i>
            </div>
            <h3 class="text-xl font-medium text-gray-900 mb-2">Your cart is empty</h3>
            <p class="text-gray-500 mb-6">
              Discover amazing products and add them to your cart to get started!
            </p>
            <p-button 
              label="Continue Shopping" 
              icon="pi pi-arrow-left"
              styleClass="p-button-outlined p-button-lg"
              routerLink="/products">
            </p-button>
          </div>
  
          <!-- Cart Items -->
          <div class="space-y-4" *ngIf="cartService.getItems().length > 0">
            <div *ngFor="let item of cartService.getItems(); trackBy: trackByProductId" 
                 class="border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors">
              <div class="flex items-center gap-4">
                
                <!-- Product Image -->
                <div class="relative flex-shrink-0">
                  <img [src]="item.product.imageUrl" 
                       [alt]="item.product.productName"
                       class="w-20 h-20 object-cover rounded-lg border border-gray-200" />
                  <span class="absolute -top-2 -right-2 bg-blue-600 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-medium">
                    {{ item.quantity }}
                  </span>
                </div>
  
                <!-- Product Details -->
                <div class="flex-1 min-w-0">
                  <h3 class="text-lg font-medium text-gray-900 mb-1">
                    {{ item.product.productName }}
                  </h3>
                  <div class="flex items-center gap-1 text-sm text-gray-500 mb-2">
                    <i class="pi pi-map-marker text-xs"></i>
                    <span>{{ item.product.storeLocation || 'Unknown Store' }}</span>
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-lg font-semibold text-gray-900">
                      {{ item.product.price | currency }}
                    </span>
                    <span class="text-sm text-gray-600 bg-gray-50 px-2 py-1 rounded">
                      Subtotal: {{ (item.product.price * item.quantity) | currency }}
                    </span>
                  </div>
                </div>
  
                <!-- Quantity Controls -->
                <div class="flex items-center gap-2 flex-shrink-0">
                  <p-button 
                    icon="pi pi-minus" 
                    styleClass="p-button-sm p-button-outlined p-button-rounded"
                    (onClick)="decreaseQuantity(item.product.productId)"
                    [disabled]="item.quantity <= 1">
                  </p-button>
                  
                  <span class="font-medium text-gray-900 w-8 text-center">
                    {{ item.quantity }}
                  </span>
                  
                  <p-button 
                    icon="pi pi-plus" 
                    styleClass="p-button-sm p-button-outlined p-button-rounded"
                    (onClick)="increaseQuantity(item.product.productId)">
                  </p-button>
                  
                  <p-button 
                    icon="pi pi-trash" 
                    styleClass="p-button-sm p-button-outlined p-button-danger p-button-rounded ml-2"
                    (onClick)="removeFromCart(item.product.productId)">
                  </p-button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
  
      <!-- Order Summary Section -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200" 
           *ngIf="cartService.getItems().length > 0">
        
        <!-- Summary Header -->
        <div class="border-b border-gray-200 px-5 py-3">
          <div class="flex items-center gap-3">
            <i class="pi pi-calculator text-green-600"></i>
            <h2 class="text-lg font-semibold text-gray-900">Order Summary</h2>
          </div>
        </div>
  
        <!-- Summary Content -->
        <div class="p-5">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            
            <!-- Left Column - Coupon & Pricing -->
            <div class="space-y-4">
              <!-- Coupon Section -->
              <div>
                <label for="coupon" class="block text-sm font-medium text-gray-700 mb-2">
                  <i class="pi pi-tag mr-1"></i>Coupon Code
                </label>
                <div class="flex gap-2">
                  <input 
                    id="coupon" 
                    type="text" 
                    [(ngModel)]="couponCode"
                    placeholder="Enter coupon code"
                    class="flex-1 px-3 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                  <p-button 
                    label="Apply" 
                    styleClass="p-button-sm p-button-outlined"
                    [disabled]="!couponCode?.trim()"
                    (onClick)="applyCoupon()">
                  </p-button>
                </div>
              </div>
  
              <!-- Price Breakdown -->
              <div class="bg-gray-50 rounded-lg p-4">
                <h3 class="font-medium text-gray-900 mb-3">Price Details</h3>
                <div class="space-y-2">
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600">Items ({{ cartService.getItems().length }})</span>
                    <span class="font-medium text-gray-900">{{ cartService.getTotal() | currency }}</span>
                  </div>
                  
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600">Shipping</span>
                    <span class="text-green-600 font-medium">Free</span>
                  </div>
                  
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600">Tax</span>
                    <span class="text-gray-600">Calculated at checkout</span>
                  </div>
                  
                  <hr class="border-gray-200 my-2">
                  
                  <div class="flex justify-between items-center">
                    <span class="font-semibold text-gray-900">Total</span>
                    <span class="text-xl font-bold text-blue-600">
                      {{ cartService.getTotal() | currency }}
                    </span>
                  </div>
                </div>
              </div>
            </div>
  
            <!-- Right Column - Actions -->
            <div class="space-y-4">
              <!-- Action Buttons -->
              <div class="space-y-1">
                <p-button 
                  label="Place Order" 
                  icon="pi pi-credit-card"
                  styleClass="w-full p-button-lg p-button-success"
                  [disabled]="cartService.getItems().length === 0"
                  (onClick)="placeOrder()">
                </p-button>
  
                <div class="pt-1">
                  <p-button
                    label="Continue Shopping" 
                    icon="pi pi-arrow-left"
                    styleClass="w-full p-button-outlined"
                    routerLink="/products">
                  </p-button>
                </div>
  
                <div class="pt-0">
                  <p-button 
                    label="Clear Cart" 
                    icon="pi pi-trash"
                    styleClass="w-full p-button-outlined p-button-danger"
                    [disabled]="cartService.getItems().length === 0"
                    (onClick)="confirmClearCart()">
                  </p-button>
                </div>
              </div>
  
              <!-- Security Info -->
              <div class="bg-green-50 border border-green-200 rounded-lg p-4 text-center">
                <i class="pi pi-shield text-green-600 text-lg mb-2"></i>
                <h4 class="font-medium text-green-800 mb-1">Secure Checkout</h4>
                <p class="text-xs text-green-700">
                  Your payment information is protected with SSL encryption
                </p>
              </div>
  
              <!-- Support Info -->
              <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
                <i class="pi pi-headphones text-blue-600 text-lg mb-2"></i>
                <h4 class="font-medium text-blue-800 mb-1">Need Help?</h4>
                <p class="text-xs text-blue-700">
                  Contact our support team for assistance
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Toast Messages -->
    <p-toast position="top-right"></p-toast>
    
    <!-- Clear Cart Confirmation Dialog -->
    <p-confirmDialog></p-confirmDialog>
  </div>